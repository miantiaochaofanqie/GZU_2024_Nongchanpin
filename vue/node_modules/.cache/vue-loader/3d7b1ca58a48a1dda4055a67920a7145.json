{"remainingRequest":"C:\\Users\\lushu\\IdeaProjects\\SDU_2023_Nongchanpin37\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lushu\\IdeaProjects\\SDU_2023_Nongchanpin37\\vue\\src\\views\\GoodSourcePage\\Details.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\lushu\\IdeaProjects\\SDU_2023_Nongchanpin37\\vue\\src\\views\\GoodSourcePage\\Details.vue","mtime":1723432475758},{"path":"C:\\Users\\lushu\\IdeaProjects\\SDU_2023_Nongchanpin37\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1722853423188},{"path":"C:\\Users\\lushu\\IdeaProjects\\SDU_2023_Nongchanpin37\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1722853422683},{"path":"C:\\Users\\lushu\\IdeaProjects\\SDU_2023_Nongchanpin37\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1722853423188},{"path":"C:\\Users\\lushu\\IdeaProjects\\SDU_2023_Nongchanpin37\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1722853427091}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBhZGRPcmRlclRvQ2FydCB9IGZyb20gIi4uLy4uL2FwaS9jYXJ0IjsNCmltcG9ydCB7IHNlbGVjdE9yZGVyQnlJZCB9IGZyb20gIi4uLy4uL2FwaS9vcmRlciI7DQppbXBvcnQgQ2hhbmdlTWVzc2FnZSBmcm9tICIuLi8uLi9jb21wb25lbnRzL0NoYW5nZU1lc3NhZ2UudnVlIjsNCmltcG9ydCB7IHNlbGVjdFVzZXJCeVVzZXJuYW1lIH0gZnJvbSAiLi4vLi4vYXBpL3VzZXIiOw0KaW1wb3J0IFN3YWwgZnJvbSAnc3dlZXRhbGVydDInOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGRhdGE6IFtdLA0KICAgICAgb3duZXJJbmZvOiB7fSwNCiAgICAgIHVzZXJHb29kczogW10sDQogICAgICB1cGRhdGVHb29kSW5mbzoge30sDQogICAgICB1cGRhdGVVc2VyRGF0YTp7fQ0KICAgIH07DQogIH0sDQogIGZpbHRlcnM6IHsNCiAgICBjaGFuZ2VUaW1lKHRpbWUpIHsNCiAgICAgIHJldHVybiB0aW1lLnNsaWNlKDAsIDEwKTsNCiAgICB9LA0KICAgIGZvcm1hdFRpbWVyOiBmdW5jdGlvbih2YWx1ZSkgew0KICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSh2YWx1ZSk7DQogICAgICBsZXQgeSA9IGRhdGUuZ2V0RnVsbFllYXIoKTsNCiAgICAgIGxldCBNTSA9IGRhdGUuZ2V0TW9udGgoKSArIDE7DQogICAgICBNTSA9IE1NIDwgMTAgPyAiMCIgKyBNTSA6IE1NOw0KICAgICAgbGV0IGQgPSBkYXRlLmdldERhdGUoKTsNCiAgICAgIGQgPSBkIDwgMTAgPyAiMCIgKyBkIDogZDsNCiAgICAgIGxldCBoID0gZGF0ZS5nZXRIb3VycygpOw0KICAgICAgaCA9IGggPCAxMCA/ICIwIiArIGggOiBoOw0KICAgICAgbGV0IG0gPSBkYXRlLmdldE1pbnV0ZXMoKTsNCiAgICAgIG0gPSBtIDwgMTAgPyAiMCIgKyBtIDogbTsNCiAgICAgIGxldCBzID0gZGF0ZS5nZXRTZWNvbmRzKCk7DQogICAgICBzID0gcyA8IDEwID8gIjAiICsgcyA6IHM7DQogICAgICByZXR1cm4geSArICItIiArIE1NICsgIi0iICsgZCArICIgIjsNCiAgICB9DQogIH0sDQogIGNvbXBvbmVudHM6IHsgQ2hhbmdlTWVzc2FnZSB9LA0KICBwcm9wczogew0KICAgIGN0eXBlOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgfSwNCiAgICBjZGVzY2lpYmU6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICB9LA0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYWRkU2hvcGNhcnRDbGljaygpIHsNCiAgICAgIGFkZE9yZGVyVG9DYXJ0KHsNCiAgICAgICAgb3JkZXJfaWQ6IHRoaXMuZGF0YS5vcmRlcklkLA0KICAgICAgfSkNCiAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgICAgaWYgKHJlcy5mbGFnID09IHRydWUpIHsNCiAgICAgICAgICAgIFN3YWwuZmlyZSh7DQogICAgICAgICAgICAgIHRpdGxlOiAn5o+Q56S6JywNCiAgICAgICAgICAgICAgdGV4dDogcmVzLm1lc3NhZ2UsDQogICAgICAgICAgICAgIGljb246ICdpbmZvJywgLy8g5Y+v6YCJ5YC8ICdzdWNjZXNzJywgJ3dhcm5pbmcnLCAnZXJyb3InDQogICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIFN3YWwuZmlyZSh7DQogICAgICAgICAgICAgIHRpdGxlOiAn5o+Q56S6JywNCiAgICAgICAgICAgICAgdGV4dDogcmVzLm1lc3NhZ2UsDQogICAgICAgICAgICAgIGljb246ICdpbmZvJywgLy8g5Y+v6YCJ5YC8ICdzdWNjZXNzJywgJ3dhcm5pbmcnLCAnZXJyb3InDQogICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICAgIGFsZXJ0KCLmt7vliqDlpLHotKUs6K+35YWI55m75b2VIik7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgY2hhbmdlSW5mbyhpdGVtKSB7DQogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZUNoYW5nZWRPcmRlcklkIiwgaXRlbSk7DQogICAgICBzZWxlY3RPcmRlckJ5SWQoew0KICAgICAgICBvcmRlcl9pZDogdGhpcy4kc3RvcmUuc3RhdGUuY2hhbmdlZE9yZGVySWQsDQogICAgICB9KQ0KICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgdGhpcy51cGRhdGVHb29kSW5mbyA9IHJlcy5kYXRhOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgZ2V0U2FsZXNJbmZvKCl7DQogICAgICBzZWxlY3RVc2VyQnlVc2VybmFtZSh7DQogICAgICAgIHVzZXJfbmFtZTogdGhpcy5kYXRhLm93bk5hbWUsDQogICAgICB9KS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgdGhpcy51cGRhdGVVc2VyRGF0YSA9IHJlcy5kYXRhOw0KICAgICAgfSkuY2F0Y2goZXJyPT57DQogICAgICAgIGNvbnNvbGUubG9nKGVycik7DQogICAgICB9KQ0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCg0KICAgIHNlbGVjdE9yZGVyQnlJZCh7DQogICAgICBvcmRlcl9pZDogdGhpcy4kcm91dGUucXVlcnkub3JkZXJJZCwNCiAgICB9KS50aGVuKChyZXMpID0+IHsNCiAgICAgIGlmIChyZXMuZmxhZyA9PSB0cnVlKSB7DQogICAgICAgIHRoaXMuZGF0YSA9IHJlcy5kYXRhOw0KDQogICAgICAgIHRoaXMuZ2V0U2FsZXNJbmZvKCkNCiAgICAgIH0NCiAgICB9KTsNCiAgfSwNCn07DQo="},{"version":3,"sources":["Details.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Details.vue","sourceRoot":"src/views/GoodSourcePage","sourcesContent":["<!--从首页进入，关于商品细节的页面-->\r\n\r\n<template>\r\n  <div class=\"details-box\">\r\n    <img v-if=\"data.picture\" :src=\"$store.state.imgShowRoad + '/file/' + data.picture\" alt=\"\" />\r\n    <img v-else src=\"../../assets/img/wutu.gif\" alt=\"\" style=\"border:1px solid #f2f2f2;\"/>\r\n    <div class=\"info\">\r\n      <h4 class=\"title\">{{ data.title }}</h4>\r\n      <div class=\"content\" :title=\"data.content\">{{ data.content }}</div>\r\n      <span class=\"price\">￥{{ data.price }}</span>\r\n      <div class=\"time\">\r\n        <span style=\"margin-right:30px;\">发布时间：{{ data.createTime | changeTime }}</span>\r\n        <span>最近修改时间：{{ data.updateTime | changeTime }}</span>\r\n      </div>\r\n      <div class=\"item-style\">\r\n        <div class=\"operation\">\r\n          <div class=\"operation-item\"><img src=\"../../assets/img/good.png\" class=\"operation-img\" alt=\"\" /> 点赞</div>\r\n          <div class=\"operation-item\"><img src=\"../../assets/img/no-star.png\" class=\"operation-img\" alt=\"\" /> 收藏</div>\r\n          <div class=\"operation-item\"><img src=\"../../assets/img/fill-in.png\" class=\"operation-img\" alt=\"\" />评论</div>\r\n        </div>\r\n        <div class=\"btn-content\">\r\n          <el-button type=\"success\" plain round @click=\"addShopcartClick\" v-if=\"data.type == 'goods'\">加入购物车</el-button>\r\n          <el-popover placement=\"right\" width=\"320\" trigger=\"hover\">\r\n            <div>\r\n              <div class=\"item-sales\">卖家姓名：<span class=\"sales-text\">{{updateUserData.userName}}</span></div>\r\n              <div class=\"item-sales\">卖家地址：<span class=\"sales-text\">{{updateUserData.address}}</span></div>\r\n              <div class=\"item-sales\">卖家手机号码：<span class=\"sales-text\">{{updateUserData.phone}}</span></div>\r\n              <div class=\"item-sales\">更新时间：<span class=\"sales-text\">{{updateUserData.updateTime | formatTimer}}</span></div>\r\n            </div>\r\n            <el-button type=\"danger\" slot=\"reference\" @click.once=\"changeInfo(item.orderId)\" v-show=\"data.type == 'needs'\">联系买家</el-button>\r\n          </el-popover>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { addOrderToCart } from \"../../api/cart\";\r\nimport { selectOrderById } from \"../../api/order\";\r\nimport ChangeMessage from \"../../components/ChangeMessage.vue\";\r\nimport { selectUserByUsername } from \"../../api/user\";\r\nimport Swal from 'sweetalert2';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      data: [],\r\n      ownerInfo: {},\r\n      userGoods: [],\r\n      updateGoodInfo: {},\r\n      updateUserData:{}\r\n    };\r\n  },\r\n  filters: {\r\n    changeTime(time) {\r\n      return time.slice(0, 10);\r\n    },\r\n    formatTimer: function(value) {\r\n      let date = new Date(value);\r\n      let y = date.getFullYear();\r\n      let MM = date.getMonth() + 1;\r\n      MM = MM < 10 ? \"0\" + MM : MM;\r\n      let d = date.getDate();\r\n      d = d < 10 ? \"0\" + d : d;\r\n      let h = date.getHours();\r\n      h = h < 10 ? \"0\" + h : h;\r\n      let m = date.getMinutes();\r\n      m = m < 10 ? \"0\" + m : m;\r\n      let s = date.getSeconds();\r\n      s = s < 10 ? \"0\" + s : s;\r\n      return y + \"-\" + MM + \"-\" + d + \" \";\r\n    }\r\n  },\r\n  components: { ChangeMessage },\r\n  props: {\r\n    ctype: {\r\n      type: String,\r\n    },\r\n    cdesciibe: {\r\n      type: String,\r\n    },\r\n  },\r\n  methods: {\r\n    addShopcartClick() {\r\n      addOrderToCart({\r\n        order_id: this.data.orderId,\r\n      })\r\n        .then((res) => {\r\n          console.log(res);\r\n          if (res.flag == true) {\r\n            Swal.fire({\r\n              title: '提示',\r\n              text: res.message,\r\n              icon: 'info', // 可选值 'success', 'warning', 'error'\r\n              confirmButtonText: '确定'\r\n            });\r\n          } else {\r\n            Swal.fire({\r\n              title: '提示',\r\n              text: res.message,\r\n              icon: 'info', // 可选值 'success', 'warning', 'error'\r\n              confirmButtonText: '确定'\r\n            });\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          alert(\"添加失败,请先登录\");\r\n        });\r\n    },\r\n    changeInfo(item) {\r\n      this.$store.commit(\"updateChangedOrderId\", item);\r\n      selectOrderById({\r\n        order_id: this.$store.state.changedOrderId,\r\n      })\r\n        .then((res) => {\r\n          this.updateGoodInfo = res.data;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    getSalesInfo(){\r\n      selectUserByUsername({\r\n        user_name: this.data.ownName,\r\n      }).then((res) => {\r\n        this.updateUserData = res.data;\r\n      }).catch(err=>{\r\n        console.log(err);\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n\r\n    selectOrderById({\r\n      order_id: this.$route.query.orderId,\r\n    }).then((res) => {\r\n      if (res.flag == true) {\r\n        this.data = res.data;\r\n\r\n        this.getSalesInfo()\r\n      }\r\n    });\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.details-box {\r\n  width: 1100px;\r\n  height: 100%;\r\n  margin: 20px auto;\r\n  padding: 20px;\r\n  padding-right: 50px;\r\n  padding-left: 50px;\r\n  background: #fff;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  img {\r\n    width: 300px;\r\n    height: 300px;\r\n    border-radius: 6px;\r\n  }\r\n  .info {\r\n    position: relative;\r\n    width: 680px;\r\n    height: 300px;\r\n    border: 1px solid #f2f2f2;\r\n    // box-shadow: 3px 3px 3px rgba(3, 0, 0, 0.07);\r\n    border-radius: 6px;\r\n    padding: 10px 20px;\r\n    .title {\r\n      font-size: 22px;\r\n      font-weight: bold;\r\n    }\r\n    .content {\r\n      height: 100px;\r\n      border: 1px dashed #f2f2f2;\r\n      line-height: 23px;\r\n      padding: 5px 10px;\r\n      /*超出的部分隐藏*/\r\n      overflow: hidden;\r\n      /*文字用省略号替代超出的部分*/\r\n      text-overflow: ellipsis;\r\n      /*弹性伸缩盒子模型显示*/\r\n      display: -webkit-box;\r\n      /*限制在一个块元素显示文本的行数*/\r\n      -webkit-line-clamp: 4;\r\n      /*设置或检索伸缩盒对象的子元素排列方式*/\r\n      -webkit-box-orient: vertical;\r\n    }\r\n    .price {\r\n      color: red;\r\n      font-size: 25px;\r\n      font-weight: bold;\r\n    }\r\n    .time {\r\n      margin-top: 5px;\r\n      color: #999;\r\n      display: flex;\r\n      justify-content: flex-start;\r\n    }\r\n    .item-style{\r\n      display: flex;\r\n      flex-direction: row;\r\n      justify-content: flex-start;\r\n      margin-top: 5px;\r\n      align-items: center;\r\n    }\r\n  }\r\n  .operation {\r\n    display: flex;\r\n    margin-top: 10px;\r\n    margin-right: 150px;\r\n    .operation-item{\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: center;\r\n      align-items: center;\r\n      margin-right: 10px;\r\n      .operation-img{\r\n        width: 20px;\r\n        height: 20px;\r\n        margin-bottom: 5px;\r\n        border-radius: 6px;\r\n      }\r\n    }\r\n  }\r\n  .btn-content{\r\n    margin-top: 10px;\r\n  }\r\n  .item-sales{\r\n    color: #333 !important;\r\n    line-height: 30px;\r\n    max-height: 30px;\r\n    .sales-text{\r\n      color: #666;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}